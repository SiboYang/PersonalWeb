---
title: Reactæ‚è®°
date: 2021-06-18
description: ç”¨äºè®°å½•ä½¿ç”¨Reactè¿›è¡Œå¼€å‘æ—¶é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£é‡Š
tags:
  - React, JavaScript
---
ä»Šå¹´æš‘æœŸæ˜¯ä½¿ç”¨Reactçš„å‰ç«¯å¼€å‘å®ä¹ ï¼Œåœ¨å¼€å‘ä¸­ç»å¸¸ä¼šä¸Šç½‘æœç´¢ä¸€äº›è‡ªå·±æ— æ³•è§£é‡Šçš„ç°è±¡ï¼Œ
äºæ˜¯å†³å®šç”¨è¿™ä¸ªæ¿å—æŠŠè‡ªå·±é‡åˆ°çš„é—®é¢˜åŠè§£å†³è®°å½•ä¸‹æ¥ï¼Œåˆšå…¥é—¨Reactçš„åŒå­¦å¯èƒ½åœ¨å¼€å‘ä¸­å’Œæˆ‘äº§ç”Ÿè¿‡ç›¸åŒçš„ç–‘é—®ï¼Œ
å¸Œæœ›èƒ½å¸®åˆ°å¤§å®¶ã€‚ï¼ˆæŒç»­æ›´æ–°ï¼‰

<hr/>

### [Reactç»„ä»¶ä¸ºä½•ä¼šæ¸²æŸ“ä¸¤æ¬¡](https://andreasheissenberger.medium.com/react-components-render-twice-any-way-to-fix-this-91cf23961625)

```js
function App() {
    const [click, setClick] = React.useState(0);
    console.log('I render ğŸ˜¡', click);
    return (
        <div>
            <button onClick={() => setClick(click => click + 1)}>
                Clicks: {click}
            </button>
        </div>
    )
}
```

å¦‚æœæˆ‘ä»¬æ˜¯ç”¨`create-react-app`æ¥åˆ›å»ºçš„é¡¹ç›®çš„è¯ï¼Œ
æˆ‘ä»¬ä¼šå‘ç°ï¼Œå½“æˆ‘ä»¬è¿è¡Œé¡¹ç›®æ—¶ï¼Œæµè§ˆå™¨æ§åˆ¶å°çš„è¾“å‡ºä¼šæ˜¯
```
I render ğŸ˜¡ 0
I render ğŸ˜¡ 0
```
å¦‚æœæˆ‘ä»¬ç‚¹å‡»æ‘é’®çš„è¯ï¼Œæµè§ˆå™¨æ§åˆ¶å°çš„è¾“å‡ºä¼šæ˜¯
```
I render ğŸ˜¡ 1
I render ğŸ˜¡ 1
```
å¾ˆå¥‡æ€ªï¼Œä¸ºä»€ä¹ˆä¼šæ¸²æŸ“ä¸¤æ¬¡ï¼Ÿ

æˆ‘ä»¬å»çœ‹`index.js`ï¼Œå…¶å®åŸå› å°±åœ¨è¿™é‡Œï¼Œ`App`ç»„ä»¶è¢«åŒ…è£¹åœ¨äº†`React.StrictMode`é‡Œ
```js
ReactDOM.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
  document.getElementById('root')
);
```
ä»€ä¹ˆæ˜¯(StrictMode)[https://reactjs.org/docs/strict-mode.html], æ ¹æ®reactæ–‡æ¡£
> StrictMode is a tool for highlighting potential problems 
in an application. Like Fragment, 
StrictMode does not render any visible UI. 
It activates additional checks and warnings for its descendants.

StrictModeä¼šæ¸²æŸ“ç»„ä»¶ä¸¤æ¬¡æ¥è¿è¡Œä¸€äº›é¢å¤–çš„æ£€æŸ¥ï¼Œä½†å¹¶ä¸ç”¨æ‹…å¿ƒé¢å¤–çš„æ¸²æŸ“ä¼šé€ æˆæ€§èƒ½æŸè€—ï¼Œ
å› ä¸ºStrictModeåªæœ‰åœ¨å¼€å‘ç¯å¢ƒä¸‹ä¼šç”Ÿæ•ˆã€‚
<hr/>

